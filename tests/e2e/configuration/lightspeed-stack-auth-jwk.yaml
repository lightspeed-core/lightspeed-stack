name: Lightspeed Core Service (LCS)
service:
  host: 0.0.0.0
  port: 8080
  auth_enabled: false
  workers: 1
  color_log: true
  access_log: true
llama_stack:
  # Uses a remote llama-stack service
  # The instance would have already been started with a llama-stack-run.yaml file
  use_as_library_client: false
  # Alternative for "as library use"
  # use_as_library_client: true
  # library_client_config_path: <path-to-llama-stack-run.yaml-file>
  url: http://llama-stack:8321
  api_key: xyzzy
user_data_collection:
  feedback_enabled: true
  feedback_storage: "/tmp/data/feedback"
  transcripts_enabled: true
  transcripts_storage: "/tmp/data/transcripts"

authentication:
  module: "jwk-token"
  jwk_config:
    url: "http://test-jwk-server:16161/jwk.json"
    jwt_configuration:
      user_id_claim: "user_id"
      username_claim: "username"
      role_rules:
        - jsonpath: "$.roles[*]"
          operator: "contains"
          value: "admin"
          roles: ["administrator"]
        - jsonpath: "$.roles[*]"
          operator: "contains"
          value: "config"
          roles: ["config"]
        - jsonpath: "$.roles[*]"
          operator: "contains"
          value: "readonly"
          roles: ["readonly"]

authorization:
  access_rules:
    - role: "administrator"
      actions: ["admin"]
    - role: "config"
      actions: ["get_config", "info"]
    - role: "readonly"
      actions: ["info"]
